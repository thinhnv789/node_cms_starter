extends ../layout/default

block stylesheets
    link(rel='stylesheet', href='/stylesheets/select-option.css')
    link(rel='stylesheet', href='/stylesheets/data-table.css')
block javascripts
    script(src='/javascripts/select-option.js')
    script(src='/javascripts/data-table.js')
    script(type='text/javascript').
        //- document.addEventListener("DOMContentLoaded", function(event) {
            let dataTable = new DataTable({
                selector: '#table-accounts',
                urlFilter: '/account/search',
                pageSize: !{JSON.stringify(pageSize)},
                total: !{JSON.stringify(total)},
                //- columns: ['STT', 'firstName', 'lastName', 'userName', 'email'],
                filters: [
                    {
                        name: 'fullName',
                        type: 'text'
                    },
                    {
                        name: 'email',
                        type: 'text'
                    },
                    {
                        name: 'statusDisplay',
                        type: 'select',
                        key: 'value',
                        value: 'text',
                        placeholder: 'Trạng thái',
                        style: 'width:140px;',
                        search: false,
                        options: [
                            {
                                value: 1,
                                text: 'Đã kích hoạt'
                            },
                            {
                                value: 0,
                                text: 'Chưa kích hoạt'
                            }
                        ]
                    }
                ]
            })
        //- });


block content
    // Content Header (Page header)
    section.content-header
      h1
        | Danh sách tài khoản
        small Ahihi
      ol.breadcrumb
        li
          a(href='/')
            i.fa.fa-dashboard
            |  Dashboard
        li.active Tài khoản
    // Main content
    section.content
        .row
            .col-xs-12
                a.btn.btn-success(href='/account/create') Tạo mới
                hr
                .box
                    .box-header
                        h3.box-title 
                        .box-tools
                            .input-group.input-group-sm(style='width: 150px;')
                                input.form-control.pull-right(type='text', name='table_search', placeholder='Search')
                                .input-group-btn
                                    button.btn.btn-default(type='submit')
                                        i.fa.fa-search
                    // /.box-header
                    .box-body.table-responsive.no-padding
                        table#table-accounts.table.table-hover
                            thead
                                tr
                                    th(name='STT') STT
                                    th(name='fullName') Họ tên
                                    th.text-center(name='avatar') Ảnh đại diện
                                    th(name='userName') Tên đăng nhập
                                    th(name='email') Email
                                    th(name='statusDisplay') Trạng thái
                                    th.text-center(name='actions', actions={view: '/account/view', edit: '/account/edit', delete: '/account/delete'}, style='width: 140px;') Hành động
                            tbody
                                each dt, i in data
                                    tr
                                        td #{i+1}
                                        td #{dt.fullName}
                                        td.text-center(style='font-size: 50px;')
                                            if dt.avatar
                                                img(src=dt.avatarUrl, style='width: 100px;')
                                            else
                                                i.fa.fa-user
                                        td #{dt.userName}
                                        td #{dt.email}
                                        td #{dt.statusDisplay}
                                        td.text-center
                                            a.user-action.btn.btn-default(href='/account/view/' + dt._id)
                                                em.fa.fa-eye
                                            a.user-action.btn.btn-success(href='/account/edit/' + dt._id)
                                                em.fa.fa-pencil
                                            button.user-action.btn.btn-danger(onclick='return confirmDelete(this, "Bạn có chắc chắn muốn xóa tài khoản này không?", "/account/delete/' + dt._id + '")')
                                                em.fa.fa-trash

